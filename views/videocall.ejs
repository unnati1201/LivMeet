<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"></script>
  <link rel="stylesheet" type="text/css" href="/css/styles.css" />
  <script>
    const url = "<%= id %>" ;
    const room = new URLSearchParams(document.location.search.substring(1)).get("room");
    var id = url;
    if(room == '1' || room == '2' || room == '3' || room == '4'){
      id = url + "?" + "room=" + room;
    }
  </script>
  <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <title>Microsoft Teams Clone</title>
</head>

<body>

    <div class="screenShareDiv" style="display: none"></div>

    <div id="video-grid" class=""></div>

    <div id="other-video"></div>

    <!-- share link popup box -->
    <div class="card invite" style="width: 20rem">

      <div class="card-body">
        <span class="material-icons closeShare">close</span>
        <p class="card-text">Share Link</p>
        <br>
        <button type="button" class="btn btn-dark copyBtn">Copy Meeting ID</button>
        <input type="email" name="" value="" id="emailID" class="form-control" placeholder="Enter Email ID">
        <a title="Share by Email" id="emailShare" target="_blank">
          <button type="button" name="button" class="btn btn-dark shareEmailBtn">Share via Email</button>
        </a>
      </div>

    </div>

    <!-- share screen popup box -->
    <div class="card screenShare" style="width: 20rem">

      <div class="card-body">
        <p class="card-text">Do you want to share your screen?</p>
        <br>
        <button type="button" class="btn btn-dark yesShare">Yes</button>
        <button type="button" class="btn btn-dark noShare">No</button>
      </div>

    </div>

  <!-- chatbox popup box -->

  <div class="card message-container" style="width: 20rem; display: none">
    <div class="card-header">
      <h5 class="card-title" style="display: inline">Chat</h5>
      <span class="material-icons closeChat">close</span>
    </div>
    <div class="card-body">
      <div class="chat-messages"></div>
      <form class="chat-form" action="index.html" method="post">
      <div class="input-group mb-3 input-group-sm send-container">
        <input type="text" class="form-control message-input" placeholder="Message" aria-label="Recipient's username" aria-describedby="basic-addon2">
          <button type="submit" name="sendMessage" class="btn btn-primary"><span class="material-icons">send</span></button>
      </div>
      </form>
    </div>
  </div>

  <!-- participants list -->

  <div class="card participants-element message-container" style="width: 20rem; display: none">
    <div class="card-header">
      <h5 class="card-title" style="display: inline">Participants</h5>
      <span class="material-icons closeList">close</span>
    </div>
    <div class="card-body participants-content chat-messages" style="height: 15rem">
    </div>
  </div>

  <!-- breakout room -->

  <div class="card breakout-element message-container" style="width: 22rem; display: none">
    <div class="card-header">
      <h5 class="card-title" style="display: inline">Participants List</h5>
      <span class="material-icons closeBRList closeList">close</span>
    </div>
    <div class="card-body">
      <div class="users-content chat-messages"></div>
      <br>
      <div style="display:flex">
        <button type="submit" name="sendMessage" class="btn btn-primary btn-sm boFinalBtn" style="display: inline-block; margin: 3px">Assign</button>
        <button type="submit" name="" class="btn btn-primary btn-sm desolveBOBtn" style="display: none; margin: 3px">Close Rooms</button>
        <button type="submit" name="" class="btn btn-primary btn-sm annoucementBtn" style="display: none; margin: 3px">Make Annoucement</button>
      </div>
    </div>
  </div>

  <div class="card annoucement-container" style="width: 20rem; display: none">
    <div class="card-header">
      <h5 class="card-title" style="display: inline">Annoucement</h5>
      <span class="material-icons closeAnnoucemntBox closeList">close</span>
    </div>
    <div class="card-body">
      <form class="aform" method="post">
        <div class="input-group mb-3">
          <input type="text" name="" value="" class="form-control annoucementInput" placeholder="Annoucement">
          <button class="input-group-text annoucementSend" id="basic-addon1" type="submit">Send</button>
        </div>
      </form>
    </div>
  </div>


  <nav class="fixed-bottom main-buttons">

    <button type="button" name="button" class="btn col-1 raiseHand" >
      <input type="text" name="" value="off" style="display: none">
      <span class="material-icons">back_hand</span>
    </button>

    <button type="button" name="button" class="btn col-1 muteBtn" >
      <span class="material-icons micIcon">mic</span>
    </button>

    <form class="" action="/meetingEnd" method="post">
      <input type="text" name="meetingId" value="<%= id %>" style="display: none">
      <button name="button" type="submit" class="btn col-1">
        <span class="material-icons end">call_end</span>
      </button>
    </form>

    <button type="button" name="button" class="btn col-1 closeCam" >
      <span class="material-icons videoBtn">videocam</span>
    </button>

    <div class="dropup" >
      <button class="btn"><span class="material-icons">more_vert</span></button>
      <div class="dropup-content">
        <a type="button" class="shareScreen">Share Screen</a>
        <a type="button" class="participants">Participants</a>
        <a type="button" class="chatBtn">Chat</a>
        <a type="button" class="shareBtn">Share Link</a>
        <a type="button" class="boRoomBtn">Breakout Rooms</a>
      </div>
    </div>

  </nav>

  <script type="text/javascript" src="script.js"></script>
  <script type="text/javascript" src="breakoutRooms.js"></script>
  <script type="text/javascript" src="speechDetect.js"></script>
</body>

</html>
